<%- include('../header.ejs') %>
<ul class="list-group">
  <% all_datas.forEach((data, idx) => { %>
  <li class="list-group-item">
    <h4>제목 : <%- data.title %> </h4>
    <p> 글 내용 : <%- data.desc %> </p>
    <button>수정</button>
		<button class="delete" data-id="<%- data.id %>">삭제</button>
  </li>
  <% }) %>
</ul>
<%- include('../footer.ejs') %>
<script>
	const DeleteFun = (e) => {
		const { id } = e.target.dataset;
		$.ajax({
			method: 'DELETE',
			url: `/list/delete/${id}`
		}).done((data) => {
			console.log(data)
			$(e.currentTarget).parent('li').fadeOut();
		}).fail((err) => {
			console.log(err)
		})
	};
	$('.delete').on('click', DeleteFun);
</script>